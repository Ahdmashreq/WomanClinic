{% extends 'master.html'%}
{% load static %}
{% load i18n %}
{% load l10n %}
{% block body %}

<div id="page-wrapper" class="p-4" style="min-height: 671px;">
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">{{ page_title }}</h1>
    </div>
    <!-- /.col-lg-12 -->
  </div>
  <!-- /.row -->
  <div class="row">
    <div class="col-xl-4 col-lg-6">
      <div class="card card-primary card-inverse">
        <div class="card-header card-primary">
          <div class="row">
            <div class="col-3">
              <i class="fa fa-female fa-5x"></i>
            </div>
            <div class="col-9 text-left">
              <div class="huge">{{patient_count}}</div>
              <div>اجمالي مريضات المتابعة</div>
            </div>
          </div>
        </div>
        <div class="card-footer card-default">
          <a href="{% url 'report:rep-all-patients' %}">
            <span class="float-sm-left">عرض</span>
            <span class="float-sm-right"><i class="fa fa-arrow-circle-right"></i></span>
            <div class="clearfix"></div>
          </a>
        </div>
      </div>
    </div>
    <div class="col-xl-4 col-lg-6">
      <div class="card card-green card-inverse">
        <div class="card-header card-green">
          <div class="row">
            <div class="col-3">
              <i class="fa fa-user-md fa-5x"></i>
            </div>
            <div class="col-9 text-left">
              <div class="huge">{{patients_consult_count}}</div>
              <div>اجمالي مريضات الأستشاري</div>
            </div>
          </div>
        </div>
        <div class="card-footer card-green">
          <a href="{% url 'report:rep-cons-patients' %}">
            <span class="float-sm-left">عرض</span>
            <span class="float-sm-right"><i class="fa fa-arrow-circle-right"></i></span>
            <div class="clearfix"></div>
          </a>
        </div>
      </div>
    </div>
    <div class="col-xl-4 col-lg-6">
      <div class="card card-yellow card-inverse">
        <div class="card-header card-yellow">
          <div class="row">
            <div class="col-3">
              <i class="fa fa-medkit fa-5x"></i>
            </div>
            <div class="col-9 text-left">
              <div class="huge">{{patients_clexane_count}}</div>
              <div>اجمالي مريضات الكلكسان</div>
            </div>
          </div>
        </div>
        <div class="card-footer card-yellow">
          <a href="{% url 'report:rep-clexane-patients'%}">
            <span class="float-sm-left">عرض</span>
            <span class="float-sm-right"><i class="fa fa-arrow-circle-right"></i></span>
            <div class="clearfix"></div>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-6">
  <canvas id="patients-entrance-chart" data-url="{% url 'report:patients-entrance-chart' %}"></canvas>
</div>
  <!-- /.row -->
</div>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script>
  $(function() {

    var $populationChart = $("#patients-entrance-chart");
    $.ajax({
      url: $populationChart.data("url"),
      success: function(data) {

        var ctx = $populationChart[0].getContext("2d");

        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: data.labels,
            datasets: [{
              label: 'المريضات',
              backgroundColor: 'blue',
              data: data.qs1
            }]
          },
          options: {
            responsive: true,
            scales: {
                yAxes: [{
                    ticks: {
                        min: .5,
                    }
                }]
            },
            legend: {
              position: 'top',
            },
            title: {
              display: true,
              text: 'احصائيةعدد المريضات الشهري'
            }
          }
        });

      }
    });

  });
</script>

{% endblock body %}
{% block js %}

{% endblock js %}
